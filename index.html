<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Titan Staffing Map</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <link href="css/styles.css" rel="stylesheet">
  <style media="screen">
    body {
      background-color: whitesmoke;
    }
    #interface {
      padding: 12px;
      color: rgb(1, 148, 211);
      text-transform: uppercase;
      font-family: "Oswald", open sans, sans-serif;
      display: grid;
      align-items: center;
    }
    h1 {
      font-weight: bold;
      color: rgb(0, 84, 158);
    }

  </style>
  <link href="./css/styles.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <!-- include the widget -->
  <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body>

    <div>
      <h1>Titan Staffing Map Login</h1>
      <div class="d-grid gap-2 col-4" id="interface">
        <button class="btn btn-primary" type="button" id="login" onclick=netlifyIdentity.open();>Login</button>
      </div>
    </div>


    <!-- <a href="/sales">Sales</a>
    <a href="/recruiting">Recruiting</a> -->

    <script type="text/javascript">
      const div = document.getElementById('interface');
      const loginBtn = document.getElementById('login');

      netlifyIdentity.on('login', function (user) {
        // console.log('init', user.app_metadata.roles);

        user.app_metadata.roles.forEach((role, i) => {
          div.innerHTML += "<a class='btn btn-secondary' href='./"+role+"'>Go To "+role+"</a>";
        });

      });

      netlifyIdentity.on('logout', function () {
          const roleButtons = document.getElementsByClassName('role');

          for (var i = 0; i < roleButtons.length; i++) {
            div.removeChild(roleButtons[i]);
          }

      });

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  </body>
</html>
